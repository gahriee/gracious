import{a as s}from"./index-B9ygI19o.js";function u(a,e,t){let n,d;e<=3?(n=1,d=e):(n=Math.max(1,a-Math.floor(3/2)),d=n+3-1,d>e&&(d=e,n=d-3+1)),t.empty(),t.append(a>1?`<button class="pagination-link" data-page="${a-1}">Previous</button>`:'<button class="pagination-link disabled" disabled>Previous</button>');for(let i=n;i<=d;i++){const m=i===a?"active":"";t.append(`
            <button class="pagination-link ${m}" data-page="${i}">${i}</button>
        `)}t.append(a<e?`<button class="pagination-link" data-page="${a+1}">Next</button>`:'<button class="pagination-link disabled" disabled>Next</button>')}const p=(a,e,t)=>{e.empty(),a.length===0?e.append(`
            <tr>
                <td colspan="8">No Employees Found</td>
            </tr>
        `):a.forEach(o=>{const n=new Date(o.created_at).toISOString().split("T")[0],d=`
                <tr>
                    <td>${o.id}</td>
                    <td>${o.first_name} ${o.last_name}</td>
                    <td>${o.username}</td>
                    <td>${o.number}</td>
                    <td>${o.role}</td>
                    <td>${o.status}</td>
                    <td>${n}</td>
                    <td>
                        ${t(o.id)}
                    </td>
                </tr>
            `;e.append(d)})},c=(a=1,e="")=>{s.post(`/admin/employee/populate?page=${a}&search=${e}`).then(t=>{const o=t.data.data,n=$("#employeeTableBody"),d=$("#activePagination");p(o,n,i=>`
                <button data-id="${i}" class="edit-btn">Edit</button>
                <button data-id="${i}" class="deactivate-btn">Deactivate</button>
            `),u(t.data.current_page,t.data.last_page,d)}).catch(t=>console.error("Error fetching active employees!",t))},l=(a=1,e="")=>{s.post(`/admin/employee/populateDeactivated?page=${a}&search=${e}`).then(t=>{const o=t.data.data,n=$("#deactivatedEmployeeTableBody"),d=$("#deactivatedPagination");p(o,n,i=>`
                <button data-id="${i}" class="activate-btn">Activate</button>
            `),u(t.data.current_page,t.data.last_page,d)}).catch(t=>console.error("Error fetching deactivated employees!",t))},r=(a,e)=>{if(a.response&&a.response.status===422){const t=a.response.data.errors;e.empty().show(),Object.values(t).forEach(o=>{o.forEach(n=>{e.append(`<li>${n}</li>`)})})}else console.error("Error:",a)};$(document).ready(()=>{c(),l(),$("#activeSearchInput").on("input",function(){const a=$(this).val();c(1,a)}),$("#deactiveSearchInput").on("input",function(){const a=$(this).val();l(1,a)}),$(document).on("click",".pagination-link",function(){const a=$(this).data("page"),e=$(".searchInput").val();$(this).hasClass("disabled")||($(this).closest("#activePagination").length>0?c(a,e):l(a,e))}),$(document).on("click",".edit-btn",function(){$("#update-errors").empty().hide();const a=$(this).data("id");s.get(`/admin/employee/fetch/${a}`).then(e=>{const t=e.data;$("#edit-employee-id").val(t.id),$("#updateFirstname").val(t.first_name),$("#updateLastname").val(t.last_name),$("#updateUsername").val(t.username),$("#updateNumber").val(t.number),$("#updateRole").val(t.role),$("#updateModal").fadeIn().css("display","flex")}).catch(e=>console.error("Error fetching employee data:",e))}),$(document).on("click",".deactivate-btn",function(){const a=$(this).data("id");s.get(`/admin/employee/fetch/${a}`).then(e=>{const t=e.data;t?($("#deactivate-employee-id").val(t.id),$("#deactivate-username").text(t.username||"No username available"),$("#deactivateModal").fadeIn().css("display","flex")):console.error("No employee data found.")}).catch(e=>console.error("Error fetching employee data:",e))}),$(document).on("click",".activate-btn",function(){const a=$(this).data("id");s.get(`/admin/employee/fetch/${a}`).then(e=>{const t=e.data;t?($("#activate-employee-id").val(t.id),$("#activate-username").text(t.username||"No username available"),$("#activateModal").fadeIn().css("display","flex")):console.error("No employee data found.")}).catch(e=>console.error("Error fetching employee data:",e))}),$("#add-btn").on("click",function(){$("#addForm")[0].reset(),$("#validation-errors").empty().hide(),$("#addModal").fadeIn().css("display","flex")}),$("#addForm").on("submit",function(a){a.preventDefault();const e=new FormData(this);s.post("/admin/employee/store",e).then(()=>{c(),l(),$("#addModal").fadeOut(),alert("Employee added successfully!")}).catch(t=>r(t,$("#validation-errors")))}),$("#updateForm").on("submit",function(a){a.preventDefault();const e=new FormData(this);s.post("/admin/employee/update",e).then(()=>{c(),l(),$("#updateModal").fadeOut(),alert("Employee updated successfully!")}).catch(t=>r(t,$("#update-errors")))}),$("#deactivateForm").on("submit",function(a){a.preventDefault();const e=new FormData(this);s.post("/admin/employee/deactivate",e).then(()=>{c(),l(),$("#deactivateModal").fadeOut(),alert("Employee deactivated successfully!")}).catch(t=>r(t,$("#validation-errors")))}),$("#activateForm").on("submit",function(a){a.preventDefault();const e=new FormData(this);s.post("/admin/employee/activate",e).then(()=>{c(),l(),$("#activateModal").fadeOut(),alert("Employee Activated successfully!")}).catch(t=>r(t,$("#validation-errors")))}),$("#add-close-modal").click(()=>$("#addModal").fadeOut()),$("#update-close-modal").click(()=>$("#updateModal").fadeOut()),$("#deactivate-close-modal").click(()=>$("#deactivateModal").fadeOut()),$("#activate-close-modal").click(()=>$("#activateModal").fadeOut())});
