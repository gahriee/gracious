import{a as f}from"./index-B9ygI19o.js";$(document).ready(function(){function i(){$(".text-danger").remove()}const c=$("#number"),l=$("#otpNumber"),p=$("#generateBtn");let a;c.on("input",function(){l.val(c.val())});const u=localStorage.getItem("otpTimerEnd");if(u){const o=Math.max(0,Math.floor((u-Date.now())/1e3));o>0?m(o,p):localStorage.removeItem("otpTimerEnd")}$("#otpForm").on("submit",function(o){o.preventDefault(),i();const r=new FormData(this);f.post("/account/verification/send-otp",r).then(function(t){const n=Date.now()+6e4;localStorage.setItem("otpTimerEnd",n),m(60,p),alert("OTP sent successfully!")}).catch(function(t){if(t.response&&t.response.data.errors){const e=t.response.data.errors;let n='<ul class="text-danger">';for(const s in e)n+=`<li>${e[s][0]}</li>`;n+="</ul>",$("#otpForm").prepend(n)}})}),$("#verificationOTP").on("submit",function(o){o.preventDefault(),i();const r=new FormData(this);r.append("number",l.val()),f.post("/account/verification/process",r).then(function(t){alert("Verification Successful"),localStorage.removeItem("otpTimerEnd"),window.location.href="/account/login"}).catch(function(t){if(t.response&&t.response.data.errors){const e=t.response.data.errors;let n='<ul class="text-danger">';for(const s in e)n+=`<li>${e[s][0]}</li>`;n+="</ul>",$("#otpForm").prepend(n)}})});function m(o,r){let t=o,e;clearInterval(a),a=setInterval(function(){e=parseInt(t%60,10),e=e<10?"0"+e:e,r.text(`Generate OTP (${e}s)`).prop("disabled",!0),--t<0&&(clearInterval(a),localStorage.removeItem("otpTimerEnd"),r.text("Generate OTP").prop("disabled",!1))},1e3)}});
